"use strict";function _typeof2(e){return(_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}void 0===window.HTMLVideoElement&&(document.createElement("video"),document.createElement("audio"),document.createElement("track")),function(e,t){"function"==typeof define&&define.amd?define(t):"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))?module.exports=t():(void 0).returnExports=t()}(0,function(){var e,t,i=Array,n=i.prototype,r=Object,o=r.prototype,a=Function.prototype,s=String,l=s.prototype,h=Number,c=h.prototype,u=n.slice,d=n.splice,f=n.push,p=n.unshift,v=n.concat,g=a.call,m=a.apply,y=Math.max,b=Math.min,w=o.toString,M="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.toStringTag),T=Function.prototype.toString;e=function(e){if("function"!=typeof e)return!1;if(M)return function(e){try{return T.call(e),!0}catch(e){return!1}}(e);var t=w.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t};var x,j=RegExp.prototype.exec;t=function(e){return"object"===_typeof2(e)&&(M?function(e){try{return j.call(e),!0}catch(e){return!1}}(e):"[object RegExp]"===w.call(e))};var O=String.prototype.valueOf;x=function(e){return"string"==typeof e||"object"===_typeof2(e)&&(M?function(e){try{return O.call(e),!0}catch(e){return!1}}(e):"[object String]"===w.call(e))};var _,S,E=r.defineProperty&&function(){try{var e={};for(var t in r.defineProperty(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),D=(_=o.hasOwnProperty,S=E?function(e,t,i,n){!n&&t in e||r.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:i})}:function(e,t,i,n){!n&&t in e||(e[t]=i)},function(e,t,i){for(var n in t)_.call(t,n)&&S(e,n,t[n],i)}),P=function(e){var t=_typeof2(e);return null===e||"object"!==t&&"function"!==t},R=h.isNaN||function(e){return e!=e},C=function(e){var t=+e;return R(t)?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t},k=function(t){var i,n,r;if(P(t))return t;if(n=t.valueOf,e(n)&&(i=n.call(t),P(i)))return i;if(r=t.toString,e(r)&&(i=r.call(t),P(i)))return i;throw new TypeError},L=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return r(e)},F=function(e){return e>>>0},V=function(){};D(a,{bind:function(t){var i=this;if(!e(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var n,o=u.call(arguments,1),a=y(0,i.length-o.length),s=[],l=0;l<a;l++)f.call(s,"$"+l);return n=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof n){var e=i.apply(this,v.call(o,u.call(arguments)));return r(e)===e?e:this}return i.apply(t,v.call(o,u.call(arguments)))}),i.prototype&&(V.prototype=i.prototype,n.prototype=new V,V.prototype=null),n}});var I=g.bind(o.hasOwnProperty),N=g.bind(o.toString),A=g.bind(u),z=m.bind(u),U=g.bind(l.slice),B=g.bind(l.split),Y=g.bind(l.indexOf),W=g.bind(f),G=g.bind(o.propertyIsEnumerable),H=g.bind(n.sort),q=i.isArray||function(e){return"[object Array]"===N(e)},X=1!==[].unshift(0);D(n,{unshift:function(){return p.apply(this,arguments),this.length}},X),D(i,{isArray:q});var $=r("a"),Z="a"!==$[0]||!(0 in $),J=function(e){var t=!0,i=!0,n=!1;if(e)try{e.call("foo",function(e,i,n){"object"!==_typeof2(n)&&(t=!1)}),e.call([1],function(){i="string"==typeof this},"x")}catch(e){n=!0}return!!e&&!n&&t&&i};D(n,{forEach:function(t){var i,n=L(this),r=Z&&x(this)?B(this,""):n,o=-1,a=F(r.length);if(arguments.length>1&&(i=arguments[1]),!e(t))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++o<a;)o in r&&(void 0===i?t(r[o],o,n):t.call(i,r[o],o,n))}},!J(n.forEach)),D(n,{map:function(t){var n,r=L(this),o=Z&&x(this)?B(this,""):r,a=F(o.length),s=i(a);if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.map callback must be a function");for(var l=0;l<a;l++)l in o&&(s[l]=void 0===n?t(o[l],l,r):t.call(n,o[l],l,r));return s}},!J(n.map)),D(n,{filter:function(t){var i,n,r=L(this),o=Z&&x(this)?B(this,""):r,a=F(o.length),s=[];if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.filter callback must be a function");for(var l=0;l<a;l++)l in o&&(i=o[l],(void 0===n?t(i,l,r):t.call(n,i,l,r))&&W(s,i));return s}},!J(n.filter)),D(n,{every:function(t){var i,n=L(this),r=Z&&x(this)?B(this,""):n,o=F(r.length);if(arguments.length>1&&(i=arguments[1]),!e(t))throw new TypeError("Array.prototype.every callback must be a function");for(var a=0;a<o;a++)if(a in r&&!(void 0===i?t(r[a],a,n):t.call(i,r[a],a,n)))return!1;return!0}},!J(n.every)),D(n,{some:function(t){var i,n=L(this),r=Z&&x(this)?B(this,""):n,o=F(r.length);if(arguments.length>1&&(i=arguments[1]),!e(t))throw new TypeError("Array.prototype.some callback must be a function");for(var a=0;a<o;a++)if(a in r&&(void 0===i?t(r[a],a,n):t.call(i,r[a],a,n)))return!0;return!1}},!J(n.some));var Q=!1;n.reduce&&(Q="object"===_typeof2(n.reduce.call("es5",function(e,t,i,n){return n}))),D(n,{reduce:function(t){var i=L(this),n=Z&&x(this)?B(this,""):i,r=F(n.length);if(!e(t))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===r&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,a=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(a in n){o=n[a++];break}if(++a>=r)throw new TypeError("reduce of empty array with no initial value")}for(;a<r;a++)a in n&&(o=t(o,n[a],a,i));return o}},!Q);var K=!1;n.reduceRight&&(K="object"===_typeof2(n.reduceRight.call("es5",function(e,t,i,n){return n}))),D(n,{reduceRight:function(t){var i,n=L(this),r=Z&&x(this)?B(this,""):n,o=F(r.length);if(!e(t))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===o&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var a=o-1;if(arguments.length>=2)i=arguments[1];else for(;;){if(a in r){i=r[a--];break}if(--a<0)throw new TypeError("reduceRight of empty array with no initial value")}if(a<0)return i;do{a in r&&(i=t(i,r[a],a,n))}while(a--);return i}},!K);var ee=n.indexOf&&-1!==[0,1].indexOf(1,2);D(n,{indexOf:function(e){var t=Z&&x(this)?B(this,""):L(this),i=F(t.length);if(0===i)return-1;var n=0;for(arguments.length>1&&(n=C(arguments[1])),n=n>=0?n:y(0,i+n);n<i;n++)if(n in t&&t[n]===e)return n;return-1}},ee);var te=n.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);D(n,{lastIndexOf:function(e){var t=Z&&x(this)?B(this,""):L(this),i=F(t.length);if(0===i)return-1;var n=i-1;for(arguments.length>1&&(n=b(n,C(arguments[1]))),n=n>=0?n:i-Math.abs(n);n>=0;n--)if(n in t&&e===t[n])return n;return-1}},te);var ie,ne,re=(ne=(ie=[1,2]).splice(),2===ie.length&&q(ne)&&0===ne.length);D(n,{splice:function(e,t){return 0===arguments.length?[]:d.apply(this,arguments)}},!re);var oe,ae=(oe={},n.splice.call(oe,0,0,1),1===oe.length);D(n,{splice:function(e,t){if(0===arguments.length)return[];var i=arguments;return this.length=y(C(this.length),0),arguments.length>0&&"number"!=typeof t&&((i=A(arguments)).length<2?W(i,this.length-e):i[1]=C(t)),d.apply(this,i)}},!ae);var se,le=((se=new i(1e5))[8]="x",se.splice(1,1),7===se.indexOf("x")),he=function(){var e=[];return e[256]="a",e.splice(257,0,"b"),"a"===e[256]}();D(n,{splice:function(e,t){for(var i,n=L(this),r=[],o=F(n.length),a=C(e),l=a<0?y(o+a,0):b(a,o),h=b(y(C(t),0),o-l),c=0;c<h;)i=s(l+c),I(n,i)&&(r[c]=n[i]),c+=1;var u,d=A(arguments,2),f=d.length;if(f<h){for(c=l;c<o-h;)i=s(c+h),u=s(c+f),I(n,i)?n[u]=n[i]:delete n[u],c+=1;for(c=o;c>o-h+f;)delete n[c-1],c-=1}else if(f>h)for(c=o-h;c>l;)i=s(c+h-1),u=s(c+f-1),I(n,i)?n[u]=n[i]:delete n[u],c-=1;c=l;for(var p=0;p<d.length;++p)n[c]=d[p],c+=1;return n.length=o-h+f,r}},!le||!he);var ce,ue=n.join;try{ce="1,2,3"!==Array.prototype.join.call("123",",")}catch(e){ce=!0}ce&&D(n,{join:function(e){var t=void 0===e?",":e;return ue.call(x(this)?B(this,""):this,t)}},ce);var de="1,2"!==[1,2].join(void 0);de&&D(n,{join:function(e){var t=void 0===e?",":e;return ue.call(this,t)}},de);var fe=function(e){for(var t=L(this),i=F(t.length),n=0;n<arguments.length;)t[i+n]=arguments[n],n+=1;return t.length=i+n,i+n},pe=function(){var e={};return 1!==Array.prototype.push.call(e,void 0)||1!==e.length||void 0!==e[0]||!I(e,0)}();D(n,{push:function(e){return q(this)?f.apply(this,arguments):fe.apply(this,arguments)}},pe);var ve=function(){var e=[];return 1!==e.push(void 0)||1!==e.length||void 0!==e[0]||!I(e,0)}();D(n,{push:fe},ve),D(n,{slice:function(e,t){var i=x(this)?B(this,""):this;return z(i,arguments)}},Z);var ge=function(){try{return[1,2].sort(null),[1,2].sort({}),!0}catch(e){}return!1}(),me=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),ye=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();D(n,{sort:function(t){if(void 0===t)return H(this);if(!e(t))throw new TypeError("Array.prototype.sort callback must be a function");return H(this,t)}},ge||!ye||!me);var be=!{toString:null}.propertyIsEnumerable("toString"),we=function(){}.propertyIsEnumerable("prototype"),Me=!I("x","0"),Te=function(e){var t=e.constructor;return t&&t.prototype===e},xe={$window:!0,$console:!0,$parent:!0,$self:!0,$frame:!0,$frames:!0,$frameElement:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$external:!0},je=function(){if("undefined"==typeof window)return!1;for(var e in window)try{!xe["$"+e]&&I(window,e)&&null!==window[e]&&"object"===_typeof2(window[e])&&Te(window[e])}catch(e){return!0}return!1}(),Oe=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],_e=Oe.length,Se=function(e){return"[object Arguments]"===N(e)},Ee=Se(arguments)?Se:function(t){return null!==t&&"object"===_typeof2(t)&&"number"==typeof t.length&&t.length>=0&&!q(t)&&e(t.callee)};D(r,{keys:function(t){var i=e(t),n=Ee(t),r=null!==t&&"object"===_typeof2(t),o=r&&x(t);if(!r&&!i&&!n)throw new TypeError("Object.keys called on a non-object");var a=[],l=we&&i;if(o&&Me||n)for(var h=0;h<t.length;++h)W(a,s(h));if(!n)for(var c in t)l&&"prototype"===c||!I(t,c)||W(a,s(c));if(be)for(var u=function(e){if("undefined"==typeof window||!je)return Te(e);try{return Te(e)}catch(e){return!1}}(t),d=0;d<_e;d++){var f=Oe[d];u&&"constructor"===f||!I(t,f)||W(a,f)}return a}});var De=r.keys&&function(){return 2===r.keys(arguments).length}(1,2),Pe=r.keys&&function(){var e=r.keys(arguments);return 1!==arguments.length||1!==e.length||1!==e[0]}(1),Re=r.keys;D(r,{keys:function(e){return Ee(e)?Re(A(e)):Re(e)}},!De||Pe);var Ce,ke,Le=0!==new Date(-0xc782b5b342b24).getUTCMonth(),Fe=new Date(-0x55d318d56a724),Ve=new Date(14496624e5),Ie="Mon, 01 Jan -45875 11:59:59 GMT"!==Fe.toUTCString();Fe.getTimezoneOffset()<-720?(Ce="Tue Jan 02 -45875"!==Fe.toDateString(),ke=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Ve.toString())):(Ce="Mon Jan 01 -45875"!==Fe.toDateString(),ke=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Ve.toString()));var Ne=g.bind(Date.prototype.getFullYear),Ae=g.bind(Date.prototype.getMonth),ze=g.bind(Date.prototype.getDate),Ue=g.bind(Date.prototype.getUTCFullYear),Be=g.bind(Date.prototype.getUTCMonth),Ye=g.bind(Date.prototype.getUTCDate),We=g.bind(Date.prototype.getUTCDay),Ge=g.bind(Date.prototype.getUTCHours),He=g.bind(Date.prototype.getUTCMinutes),qe=g.bind(Date.prototype.getUTCSeconds),Xe=g.bind(Date.prototype.getUTCMilliseconds),$e=["Sun","Mon","Tue","Wed","Thu","Fri"],Ze=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Je=function(e,t){return ze(new Date(t,e,0))};D(Date.prototype,{getFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ne(this);return e<0&&Ae(this)>11?e+1:e},getMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ne(this),t=Ae(this);return e<0&&t>11?0:t},getDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ne(this),t=Ae(this),i=ze(this);return e<0&&t>11?12===t?i:Je(0,e+1)-i+1:i},getUTCFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ue(this);return e<0&&Be(this)>11?e+1:e},getUTCMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ue(this),t=Be(this);return e<0&&t>11?0:t},getUTCDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ue(this),t=Be(this),i=Ye(this);return e<0&&t>11?12===t?i:Je(0,e+1)-i+1:i}},Le),D(Date.prototype,{toUTCString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=We(this),t=Ye(this),i=Be(this),n=Ue(this),r=Ge(this),o=He(this),a=qe(this);return $e[e]+", "+(t<10?"0"+t:t)+" "+Ze[i]+" "+n+" "+(r<10?"0"+r:r)+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)+" GMT"}},Le||Ie),D(Date.prototype,{toDateString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),i=this.getMonth(),n=this.getFullYear();return $e[e]+" "+Ze[i]+" "+(t<10?"0"+t:t)+" "+n}},Le||Ce),(Le||ke)&&(Date.prototype.toString=function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),i=this.getMonth(),n=this.getFullYear(),r=this.getHours(),o=this.getMinutes(),a=this.getSeconds(),s=this.getTimezoneOffset(),l=Math.floor(Math.abs(s)/60),h=Math.floor(Math.abs(s)%60);return $e[e]+" "+Ze[i]+" "+(t<10?"0"+t:t)+" "+n+" "+(r<10?"0"+r:r)+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)+" GMT"+(s>0?"-":"+")+(l<10?"0"+l:l)+(h<10?"0"+h:h)},E&&r.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var Qe=Date.prototype.toISOString&&-1===new Date(-621987552e5).toISOString().indexOf("-000001"),Ke=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString();D(Date.prototype,{toISOString:function(){if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var e=Ue(this),t=Be(this);e+=Math.floor(t/12);var i=[(t=(t%12+12)%12)+1,Ye(this),Ge(this),He(this),qe(this)];e=(e<0?"-":e>9999?"+":"")+U("00000"+Math.abs(e),0<=e&&e<=9999?-4:-6);for(var n=0;n<i.length;++n)i[n]=U("00"+i[n],-2);return e+"-"+A(i,0,2).join("-")+"T"+A(i,2).join(":")+"."+U("000"+Xe(this),-3)+"Z"}},Qe||Ke),function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(-621987552e5).toJSON().indexOf("-000001")&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}()||(Date.prototype.toJSON=function(t){var i=r(this),n=k(i);if("number"==typeof n&&!isFinite(n))return null;var o=i.toISOString;if(!e(o))throw new TypeError("toISOString property is not callable");return o.call(i)});var et=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),tt=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));if(isNaN(Date.parse("2000-01-01T00:00:00.000Z"))||tt||!et){var it=Math.pow(2,31)-1,nt=R(new Date(1970,0,1,0,0,0,it+1).getTime());Date=function(e){var t=function(i,n,r,o,a,l,h){var c,u=arguments.length;if(this instanceof e){var d=l,f=h;if(nt&&u>=7&&h>it){var p=Math.floor(h/it)*it,v=Math.floor(p/1e3);d+=v,f-=1e3*v}c=1===u&&s(i)===i?new e(t.parse(i)):u>=7?new e(i,n,r,o,a,d,f):u>=6?new e(i,n,r,o,a,d):u>=5?new e(i,n,r,o,a):u>=4?new e(i,n,r,o):u>=3?new e(i,n,r):u>=2?new e(i,n):u>=1?new e(i):new e}else c=e.apply(this,arguments);return P(c)||D(c,{constructor:t},!0),c},i=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),n=[0,31,59,90,120,151,181,212,243,273,304,334,365],r=function(e,t){var i=t>1?1:0;return n[t]+Math.floor((e-1969+i)/4)-Math.floor((e-1901+i)/100)+Math.floor((e-1601+i)/400)+365*(e-1970)};for(var o in e)I(e,o)&&(t[o]=e[o]);D(t,{now:e.now,UTC:e.UTC},!0),t.prototype=e.prototype,D(t.prototype,{constructor:t},!0);return D(t,{parse:function(t){var n=i.exec(t);if(n){var o,a=h(n[1]),s=h(n[2]||1)-1,l=h(n[3]||1)-1,c=h(n[4]||0),u=h(n[5]||0),d=h(n[6]||0),f=Math.floor(1e3*h(n[7]||0)),p=Boolean(n[4]&&!n[8]),v="-"===n[9]?1:-1,g=h(n[10]||0),m=h(n[11]||0);return c<(u>0||d>0||f>0?24:25)&&u<60&&d<60&&f<1e3&&s>-1&&s<12&&g<24&&m<60&&l>-1&&l<r(a,s+1)-r(a,s)&&(o=1e3*(60*((o=60*(24*(r(a,s)+l)+c+g*v))+u+m*v)+d)+f,p&&(o=function(t){var i=0,n=t;if(nt&&n>it){var r=Math.floor(n/it)*it,o=Math.floor(r/1e3);i+=o,n-=1e3*o}return h(new e(1970,0,1,0,0,i,n))}(o)),-864e13<=o&&o<=864e13)?o:NaN}return e.parse.apply(this,arguments)}}),t}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var rt=c.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),ot={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(e,t){for(var i=-1,n=t;++i<ot.size;)n+=e*ot.data[i],ot.data[i]=n%ot.base,n=Math.floor(n/ot.base)},divide:function(e){for(var t=ot.size,i=0;--t>=0;)i+=ot.data[t],ot.data[t]=Math.floor(i/e),i=i%e*ot.base},numToString:function(){for(var e=ot.size,t="";--e>=0;)if(""!==t||0===e||0!==ot.data[e]){var i=s(ot.data[e]);""===t?t=i:t+=U("0000000",0,7-i.length)+i}return t},pow:function e(t,i,n){return 0===i?n:i%2==1?e(t,i-1,n*t):e(t*t,i/2,n)},log:function(e){for(var t=0,i=e;i>=4096;)t+=12,i/=4096;for(;i>=2;)t+=1,i/=2;return t}};D(c,{toFixed:function(e){var t,i,n,r,o,a,l,c;if(t=h(e),(t=R(t)?0:Math.floor(t))<0||t>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(i=h(this),R(i))return"NaN";if(i<=-1e21||i>=1e21)return s(i);if(n="",i<0&&(n="-",i=-i),r="0",i>1e-21)if(a=(o=ot.log(i*ot.pow(2,69,1))-69)<0?i*ot.pow(2,-o,1):i/ot.pow(2,o,1),a*=4503599627370496,(o=52-o)>0){for(ot.multiply(0,a),l=t;l>=7;)ot.multiply(1e7,0),l-=7;for(ot.multiply(ot.pow(10,l,1),0),l=o-1;l>=23;)ot.divide(1<<23),l-=23;ot.divide(1<<l),ot.multiply(1,1),ot.divide(2),r=ot.numToString()}else ot.multiply(0,a),ot.multiply(1<<-o,0),r=ot.numToString()+U("0.00000000000000000000",2,2+t);return r=t>0?(c=r.length)<=t?n+U("0.0000000000000000000",0,t-c+2)+r:n+U(r,0,c-t)+"."+U(r,c-t):n+r}},rt);var at,st,lt=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),ht=c.toPrecision;D(c,{toPrecision:function(e){return void 0===e?ht.call(this):ht.call(this,e)}},lt),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(at=void 0===/()??/.exec("")[1],st=Math.pow(2,32)-1,l.split=function(e,i){var n=String(this);if(void 0===e&&0===i)return[];if(!t(e))return B(this,e,i);var r,o,a,s,l=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,u=new RegExp(e.source,h+"g");at||(r=new RegExp("^"+u.source+"$(?!\\s)",h));var d=void 0===i?st:F(i);for(o=u.exec(n);o&&!((a=o.index+o[0].length)>c&&(W(l,U(n,c,o.index)),!at&&o.length>1&&o[0].replace(r,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(o[e]=void 0)}),o.length>1&&o.index<n.length&&f.apply(l,A(o,1)),s=o[0].length,c=a,l.length>=d));)u.lastIndex===o.index&&u.lastIndex++,o=u.exec(n);return c===n.length?!s&&u.test("")||W(l,""):W(l,U(n,c)),l.length>d?U(l,0,d):l}):"0".split(void 0,0).length&&(l.split=function(e,t){return void 0===e&&0===t?[]:B(this,e,t)});var ct,ut=l.replace;(ct=[],"x".replace(/x(.)?/g,function(e,t){W(ct,t)}),1===ct.length&&void 0===ct[0])||(l.replace=function(i,n){var r=e(n),o=t(i)&&/\)[*?]/.test(i.source);if(r&&o){return ut.call(this,i,function(e){var t=arguments.length,r=i.lastIndex;i.lastIndex=0;var o=i.exec(e)||[];return i.lastIndex=r,W(o,arguments[t-2],arguments[t-1]),n.apply(this,o)})}return ut.call(this,i,n)});var dt=l.substr,ft="".substr&&"b"!=="0b".substr(-1);D(l,{substr:function(e,t){var i=e;return e<0&&(i=y(this.length+e,0)),dt.call(this,i,t)}},ft);var pt="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",vt="["+pt+"]",gt=new RegExp("^"+vt+vt+"*"),mt=new RegExp(vt+vt+"*$"),yt=l.trim&&(pt.trim()||!"​".trim());D(l,{trim:function(){if(null==this)throw new TypeError("can't convert "+this+" to object");return s(this).replace(gt,"").replace(mt,"")}},yt);var bt=g.bind(String.prototype.trim),wt=l.lastIndexOf&&-1!=="abcあい".lastIndexOf("あい",2);D(l,{lastIndexOf:function(e){if(null==this)throw new TypeError("can't convert "+this+" to object");for(var t=s(this),i=s(e),n=arguments.length>1?h(arguments[1]):NaN,r=R(n)?1/0:C(n),o=b(y(r,0),t.length),a=i.length,l=o+a;l>0;){l=y(0,l-a);var c=Y(U(t,l,o+a),i);if(-1!==c)return l+c}return-1}},wt);var Mt,Tt,xt,jt=l.lastIndexOf;if(D(l,{lastIndexOf:function(e){return jt.apply(this,arguments)}},1!==l.lastIndexOf.length),8===parseInt(pt+"08")&&22===parseInt(pt+"0x16")||(parseInt=(Mt=parseInt,Tt=/^[\-+]?0[xX]/,function(e,t){var i=bt(e),n=h(t)||(Tt.test(i)?16:10);return Mt(i,n)})),1/parseFloat("-0")!=-1/0&&(parseFloat=(xt=parseFloat,function(e){var t=bt(e),i=xt(t);return 0===i&&"-"===U(t,0,1)?-0:i})),"RangeError: test"!==String(new RangeError("test"))){Error.prototype.toString=function(){if(null==this)throw new TypeError("can't convert "+this+" to object");var e=this.name;void 0===e?e="Error":"string"!=typeof e&&(e=s(e));var t=this.message;return void 0===t?t="":"string"!=typeof t&&(t=s(t)),e?t?e+": "+t:e:t}}if(E){var Ot=function(e,t){if(G(e,t)){var i=Object.getOwnPropertyDescriptor(e,t);i.enumerable=!1,Object.defineProperty(e,t,i)}};Ot(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),Ot(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){RegExp.prototype.toString=function(){var e="/"+this.source+"/";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),e}}}),function(e,t){"function"==typeof define&&define.amd?define(t):"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))?module.exports=t():(void 0).returnExports=t()}(0,function(){var e,t,i,n,r=Function.call,o=Object.prototype,a=r.bind(o.hasOwnProperty),s=r.bind(o.propertyIsEnumerable),l=r.bind(o.toString),h=a(o,"__defineGetter__");h&&(e=r.bind(o.__defineGetter__),t=r.bind(o.__defineSetter__),i=r.bind(o.__lookupGetter__),n=r.bind(o.__lookupSetter__)),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){var t=e.__proto__;return t||null===t?t:"[object Function]"===l(e.constructor)?e.constructor.prototype:e instanceof Object?o:null});var c=function(e){try{return e.sentinel=0,0===Object.getOwnPropertyDescriptor(e,"sentinel").value}catch(e){return!1}};if(Object.defineProperty){var u=c({});if(!("undefined"==typeof document||c(document.createElement("div")))||!u)var d=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||d){Object.getOwnPropertyDescriptor=function(e,t){if("object"!==_typeof2(e)&&"function"!=typeof e||null===e)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+e);if(d)try{return d.call(Object,e,t)}catch(e){}var r;if(!a(e,t))return r;if(r={enumerable:s(e,t),configurable:!0},h){var l=e.__proto__,c=e!==o;c&&(e.__proto__=o);var u=i(e,t),f=n(e,t);if(c&&(e.__proto__=l),u||f)return u&&(r.get=u),f&&(r.set=f),r}return r.value=e[t],r.writable=!0,r}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),!Object.create){var f,p=!({__proto__:null}instanceof Object);f=p||"undefined"==typeof document?function(){return{__proto__:null}}:function(){var e=function(){if(!document.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(e){return!1}}()?function(){var e,t;return(t=new ActiveXObject("htmlfile")).write("<script><\/script>"),t.close(),e=t.parentWindow.Object.prototype,t=null,e}():function(){var e,t=document.createElement("iframe"),i=document.body||document.documentElement;return t.style.display="none",i.appendChild(t),t.src="javascript:",e=t.contentWindow.Object.prototype,i.removeChild(t),t=null,e}();delete e.constructor,delete e.hasOwnProperty,delete e.propertyIsEnumerable,delete e.isPrototypeOf,delete e.toLocaleString,delete e.toString,delete e.valueOf;var t=function(){};return t.prototype=e,f=function(){return new t},new t},Object.create=function(e,t){var i,n=function(){};if(null===e)i=f();else{if("object"!==_typeof2(e)&&"function"!=typeof e)throw new TypeError("Object prototype may only be an Object or null");n.prototype=e,(i=new n).__proto__=e}return void 0!==t&&Object.defineProperties(i,t),i}}var v,g=function(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(e){return!1}};if(Object.defineProperty){var m=g({}),y="undefined"==typeof document||g(document.createElement("div"));if(!m||!y)var b=Object.defineProperty,w=Object.defineProperties}if(!Object.defineProperty||b){Object.defineProperty=function(r,a,s){if("object"!==_typeof2(r)&&"function"!=typeof r||null===r)throw new TypeError("Object.defineProperty called on non-object: "+r);if("object"!==_typeof2(s)&&"function"!=typeof s||null===s)throw new TypeError("Property description must be an object: "+s);if(b)try{return b.call(Object,r,a,s)}catch(e){}if("value"in s)if(h&&(i(r,a)||n(r,a))){var l=r.__proto__;r.__proto__=o,delete r[a],r[a]=s.value,r.__proto__=l}else r[a]=s.value;else{if(!h&&("get"in s||"set"in s))throw new TypeError("getters & setters can not be defined on this javascript engine");"get"in s&&e(r,a,s.get),"set"in s&&t(r,a,s.set)}return r}}Object.defineProperties&&!w||(Object.defineProperties=function(e,t){if(w)try{return w.call(Object,e,t)}catch(e){}return Object.keys(t).forEach(function(i){"__proto__"!==i&&Object.defineProperty(e,i,t[i])}),e}),Object.seal||(Object.seal=function(e){if(Object(e)!==e)throw new TypeError("Object.seal can only be called on Objects.");return e}),Object.freeze||(Object.freeze=function(e){if(Object(e)!==e)throw new TypeError("Object.freeze can only be called on Objects.");return e});try{Object.freeze(function(){})}catch(e){Object.freeze=(v=Object.freeze,function(e){return"function"==typeof e?e:v(e)})}Object.preventExtensions||(Object.preventExtensions=function(e){if(Object(e)!==e)throw new TypeError("Object.preventExtensions can only be called on Objects.");return e}),Object.isSealed||(Object.isSealed=function(e){if(Object(e)!==e)throw new TypeError("Object.isSealed can only be called on Objects.");return!1}),Object.isFrozen||(Object.isFrozen=function(e){if(Object(e)!==e)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)!==e)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var t="";a(e,t);)t+="?";e[t]=!0;var i=a(e,t);return delete e[t],i})}),function e(t,i,n){function r(a,s){if(!i[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(e){var i=t[a][1][e];return r(i||e)},c,c.exports,e,t,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e,t,i){function n(e,t,i,n){var r,o;function a(i){r=t(a,n),e(i-(o||i)),o=i}return{start:function(){r||a(0)},stop:function(){i(r),r=null,o=0}}}Object.defineProperty(i,"__esModule",{value:!0}),i.intervalometer=n,i.frameIntervalometer=function(e){return n(e,requestAnimationFrame,cancelAnimationFrame)},i.timerIntervalometer=function(e,t){return n(e,setTimeout,clearTimeout,t)}},{}],2:[function(e,t,i){var n,r=(n=e("poor-mans-symbol"))&&"object"===_typeof2(n)&&"default"in n?n.default:n,o=e("intervalometer");function a(e,t,i,n){function r(t){Boolean(e[i])===Boolean(n)&&t.stopImmediatePropagation(),delete e[i]}return e.addEventListener(t,r,!1),r}function s(e,t,i,n){function r(e){i[t]=e}n&&r(e[t]),Object.defineProperty(e,t,{get:function(){return i[t]},set:r})}function l(e,t,i){i.addEventListener(t,function(){return e.dispatchEvent(new Event(t))})}function h(e,t){Promise.resolve().then(function(){e.dispatchEvent(new Event(t))})}var c="object-fit"in document.head.style&&/iPhone|iPod/i.test(navigator.userAgent)&&!matchMedia("(-webkit-video-playable-inline)").matches,u=r(),d=r(),f=r("nativeplay"),p=r("nativepause");var v,g=[],m=0;function y(e,t,i){(v||0)+200<Date.now()&&(e[d]=!0,v=Date.now()),i||(e.currentTime=t),g[++m%3]=100*t|0}function b(e){return e.driver.currentTime>=e.video.duration}function w(){var e=this[u];this.webkitDisplayingFullscreen?this[f]():("data:"!==e.driver.src&&e.driver.src!==this.src&&(y(this,0,!0),e.driver.src=this.src),this.paused&&(e.paused=!1,this.buffered.length||this.load(),e.driver.play(),e.updater.start(),e.hasAudio||(h(this,"play"),e.video.readyState>=e.video.HAVE_ENOUGH_DATA&&h(this,"playing"))))}function M(e){var t=this[u];t.driver.pause(),t.updater.stop(),this.webkitDisplayingFullscreen&&this[p](),t.paused&&!e||(t.paused=!0,t.hasAudio||h(this,"pause"),this.ended&&(this[d]=!0,h(this,"ended")))}function T(e,t){var i=e[u]={};i.paused=!0,i.hasAudio=t,i.video=e,i.updater=o.frameIntervalometer(function(e){this.video.readyState>=this.video.HAVE_FUTURE_DATA?(this.hasAudio||(this.driver.currentTime=this.video.currentTime+e*this.video.playbackRate/1e3,this.video.loop&&b(this)&&(this.driver.currentTime=0)),y(this.video,this.driver.currentTime)):this.video.networkState!==this.video.NETWORK_IDLE||this.video.buffered.length||this.video.load(),this.video.ended&&(delete this.video[d],this.video.pause(!0))}.bind(i)),t?i.driver=function(e){var t=new Audio;return l(e,"play",t),l(e,"playing",t),l(e,"pause",t),t.crossOrigin=e.crossOrigin,t.src=e.src||e.currentSrc||"data:",t}(e):(e.addEventListener("canplay",function(){e.paused||h(e,"playing")}),i.driver={src:e.src||e.currentSrc||"data:",muted:!0,paused:!0,pause:function(){i.driver.paused=!0},play:function(){i.driver.paused=!1,b(i)&&y(e,0)},get ended(){return b(i)}}),e.addEventListener("emptied",function(){var t=!i.driver.src||"data:"===i.driver.src;i.driver.src&&i.driver.src!==e.src&&(y(e,0,!0),i.driver.src=e.src,t?i.driver.play():i.updater.stop())},!1),e.addEventListener("webkitbeginfullscreen",function(){e.paused?t&&!i.driver.buffered.length&&i.driver.load():(e.pause(),e[f]())}),t&&(e.addEventListener("webkitendfullscreen",function(){i.driver.currentTime=e.currentTime}),e.addEventListener("seeking",function(){g.indexOf(100*e.currentTime|0)<0&&(i.driver.currentTime=e.currentTime)}))}function x(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!0),i&&!c||e[u]||(T(e,t),function(e){var t=e[u];e[f]=e.play,e[p]=e.pause,e.play=w,e.pause=M,s(e,"paused",t.driver),s(e,"muted",t.driver,!0),s(e,"playbackRate",t.driver,!0),s(e,"ended",t.driver),s(e,"loop",t.driver,!0),a(e,"seeking"),a(e,"seeked"),a(e,"timeupdate",d,!1),a(e,"ended",d,!1)}(e),e.classList.add("IIV"),!t&&e.autoplay&&e.play(),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments"))}x.isWhitelisted=c,t.exports=x},{intervalometer:1,"poor-mans-symbol":3}],3:[function(e,t,i){var n="undefined"==typeof Symbol?function(e){return"@"+(e||"@")+Math.random()}:Symbol;t.exports=n},{}],4:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=a(e("../lib/Detector")),r=a(e("../lib/MobileBuffering")),o=a(e("../lib/Util"));function a(e){return e&&e.__esModule?e:{default:e}}i.default=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{constructor:function(r,o){this.settings=o,this.width=r.el().offsetWidth,this.height=r.el().offsetHeight,this.lon=o.initLon,this.lat=o.initLat,this.phi=0,this.theta=0,this.videoType=o.videoType,this.clickToToggle=o.clickToToggle,this.mouseDown=!1,this.isUserInteracting=!1,this.renderer=new t.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.renderer.autoClear=!1,this.renderer.setClearColor(0,1);var a=i.getTech(r);if(this.supportVideoTexture=n.default.supportVideoTexture(),this.liveStreamOnSafari=n.default.isLiveStreamOnSafari(a),this.liveStreamOnSafari&&(this.supportVideoTexture=!1),this.supportVideoTexture)this.texture=new t.Texture(a);else{this.helperCanvas=r.addChild("HelperCanvas",{video:a,width:o.helperCanvas.width?o.helperCanvas.width:this.width,height:o.helperCanvas.height?o.helperCanvas.height:this.height});var s=this.helperCanvas.el();this.texture=new t.Texture(s)}a.style.visibility="hidden",this.texture.generateMipmaps=!1,this.texture.minFilter=t.LinearFilter,this.texture.maxFilter=t.LinearFilter,this.texture.format=t.RGBFormat,this.el_=this.renderer.domElement,this.el_.classList.add("vjs-video-canvas"),o.el=this.el_,e.call(this,r,o),this.attachControlEvents(),this.player().on("play",function(){this.time=(new Date).getTime(),this.startAnimation()}.bind(this))},attachControlEvents:function(){this.on("mousemove",this.handleMouseMove.bind(this)),this.on("touchmove",this.handleTouchMove.bind(this)),this.on("mousedown",this.handleMouseDown.bind(this)),this.on("touchstart",this.handleTouchStart.bind(this)),this.on("mouseup",this.handleMouseUp.bind(this)),this.on("touchend",this.handleTouchEnd.bind(this)),this.settings.scrollable&&(this.on("mousewheel",this.handleMouseWheel.bind(this)),this.on("MozMousePixelScroll",this.handleMouseWheel.bind(this))),this.on("mouseenter",this.handleMouseEnter.bind(this)),this.on("mouseleave",this.handleMouseLease.bind(this)),this.on("dispose",this.handleDispose.bind(this))},handleDispose:function(e){this.off("mousemove",this.handleMouseMove.bind(this)),this.off("touchmove",this.handleTouchMove.bind(this)),this.off("mousedown",this.handleMouseDown.bind(this)),this.off("touchstart",this.handleTouchStart.bind(this)),this.off("mouseup",this.handleMouseUp.bind(this)),this.off("touchend",this.handleTouchEnd.bind(this)),this.settings.scrollable&&(this.off("mousewheel",this.handleMouseWheel.bind(this)),this.off("MozMousePixelScroll",this.handleMouseWheel.bind(this))),this.off("mouseenter",this.handleMouseEnter.bind(this)),this.off("mouseleave",this.handleMouseLease.bind(this)),this.off("dispose",this.handleDispose.bind(this)),this.stopAnimation()},startAnimation:function(){this.render_animation=!0,this.animate()},stopAnimation:function(){this.render_animation=!1,this.requestAnimationId&&cancelAnimationFrame(this.requestAnimationId)},handleResize:function(){this.width=this.player().el().offsetWidth,this.height=this.player().el().offsetHeight,this.renderer.setSize(this.width,this.height)},handleMouseUp:function(e){if(this.mouseDown=!1,this.clickToToggle){var t=e.clientX||e.changedTouches&&e.changedTouches[0].clientX,i=e.clientY||e.changedTouches&&e.changedTouches[0].clientY;if(void 0===t||"undefined"===i)return;var n=Math.abs(t-this.onPointerDownPointerX),r=Math.abs(i-this.onPointerDownPointerY);n<.1&&r<.1&&(this.player().paused()?this.player().play():this.player().pause())}},handleMouseDown:function(e){e.preventDefault();var t=e.clientX||e.touches&&e.touches[0].clientX,i=e.clientY||e.touches&&e.touches[0].clientY;void 0!==t&&"undefined"!==i&&(this.mouseDown=!0,this.onPointerDownPointerX=t,this.onPointerDownPointerY=i,this.onPointerDownLon=this.lon,this.onPointerDownLat=this.lat)},handleTouchStart:function(e){e.touches.length>1&&(this.isUserPinch=!0,this.multiTouchDistance=o.default.getTouchesDistance(e.touches)),this.handleMouseDown(e)},handleTouchEnd:function(e){this.isUserPinch=!1,this.handleMouseUp(e)},handleMouseMove:function(e){var t=e.clientX||e.touches&&e.touches[0].clientX,i=e.clientY||e.touches&&e.touches[0].clientY;if(void 0!==t&&"undefined"!==i)if(this.settings.clickAndDrag)this.mouseDown&&(this.lon=.2*(this.onPointerDownPointerX-t)+this.onPointerDownLon,this.lat=.2*(i-this.onPointerDownPointerY)+this.onPointerDownLat);else{var n=t-this.el_.offsetLeft,r=i-this.el_.offsetTop;this.lon=n/this.width*430-225,this.lat=r/this.height*-180+90}},handleTouchMove:function(e){(!this.isUserPinch||e.touches.length<=1)&&this.handleMouseMove(e)},handleMobileOrientation:function(e){if(void 0!==e.rotationRate){var t=e.rotationRate.alpha,i=e.rotationRate.beta,n=void 0!==e.portrait?e.portrait:window.matchMedia("(orientation: portrait)").matches,r=void 0!==e.landscape?e.landscape:window.matchMedia("(orientation: landscape)").matches,o=e.orientation||window.orientation;if(n)this.lon=this.lon-i*this.settings.mobileVibrationValue,this.lat=this.lat+t*this.settings.mobileVibrationValue;else if(r){var a=-90;void 0!==o&&(a=o),this.lon=-90==a?this.lon+t*this.settings.mobileVibrationValue:this.lon-t*this.settings.mobileVibrationValue,this.lat=-90==a?this.lat+i*this.settings.mobileVibrationValue:this.lat-i*this.settings.mobileVibrationValue}}},handleMouseWheel:function(e){e.stopPropagation(),e.preventDefault()},handleMouseEnter:function(e){this.isUserInteracting=!0},handleMouseLease:function(e){this.isUserInteracting=!1,this.mouseDown&&(this.mouseDown=!1)},animate:function(){if(this.render_animation){if(this.requestAnimationId=requestAnimationFrame(this.animate.bind(this)),!this.player().paused()&&void 0!==this.texture&&(!this.isPlayOnMobile&&this.player().readyState()>=2||this.isPlayOnMobile&&this.player().hasClass("vjs-playing"))){var e=(new Date).getTime();if(e-this.time>=30&&(this.texture.needsUpdate=!0,this.time=e),this.isPlayOnMobile){var t=this.player().currentTime();r.default.isBuffering(t)?this.player().hasClass("vjs-panorama-mobile-inline-video-buffering")||this.player().addClass("vjs-panorama-mobile-inline-video-buffering"):this.player().hasClass("vjs-panorama-mobile-inline-video-buffering")&&this.player().removeClass("vjs-panorama-mobile-inline-video-buffering")}}this.render()}},render:function(){if(!this.isUserInteracting){var e=this.lat>this.settings.initLat?-1:1,i=this.lon>this.settings.initLon?-1:1;this.settings.backToVerticalCenter&&(this.lat=this.lat>this.settings.initLat-Math.abs(this.settings.returnStepLat)&&this.lat<this.settings.initLat+Math.abs(this.settings.returnStepLat)?this.settings.initLat:this.lat+this.settings.returnStepLat*e),this.settings.backToHorizonCenter&&(this.lon=this.lon>this.settings.initLon-Math.abs(this.settings.returnStepLon)&&this.lon<this.settings.initLon+Math.abs(this.settings.returnStepLon)?this.settings.initLon:this.lon+this.settings.returnStepLon*i)}this.lat=Math.max(this.settings.minLat,Math.min(this.settings.maxLat,this.lat)),this.lon=Math.max(this.settings.minLon,Math.min(this.settings.maxLon,this.lon)),this.phi=t.Math.degToRad(90-this.lat),this.theta=t.Math.degToRad(this.lon),this.supportVideoTexture||this.helperCanvas.update(),this.renderer.clear()},playOnMobile:function(){this.isPlayOnMobile=!0,this.settings.autoMobileOrientation&&window.addEventListener("devicemotion",this.handleMobileOrientation.bind(this))},el:function(){return this.el_}}}},{"../lib/Detector":6,"../lib/MobileBuffering":8,"../lib/Util":11}],5:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=o(e("./BaseCanvas")),r=o(e("./Util"));function o(e){return e&&e.__esModule?e:{default:e}}i.default=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(0,n.default)(e,t,i);return r.default.extend(o,{constructor:function(e,i){o.constructor.call(this,e,i),this.VRMode=!1,this.scene=new t.Scene,this.camera=new t.PerspectiveCamera(i.initFov,this.width/this.height,1,2e3),this.camera.target=new t.Vector3(0,0,0);var n="equirectangular"===this.videoType?new t.SphereGeometry(500,60,40):new t.SphereBufferGeometry(500,60,40).toNonIndexed();if("fisheye"===this.videoType){for(var r=n.attributes.normal.array,a=n.attributes.uv.array,s=0,l=r.length/3;s<l;s++){var h=r[3*s+0],c=r[3*s+1],u=r[3*s+2],d=Math.asin(Math.sqrt(h*h+u*u)/Math.sqrt(h*h+c*c+u*u))/Math.PI;c<0&&(d=1-d);var f=0==h&&0==u?0:Math.acos(h/Math.sqrt(h*h+u*u));u<0&&(f*=-1),a[2*s+0]=-.8*d*Math.cos(f)+.5,a[2*s+1]=.8*d*Math.sin(f)+.5}n.rotateX(i.rotateX),n.rotateY(i.rotateY),n.rotateZ(i.rotateZ)}else if("dual_fisheye"===this.videoType){for(var p=n.attributes.normal.array,v=n.attributes.uv.array,g=p.length/3,m=0;m<g/2;m++){var y=p[3*m+0],b=p[3*m+1],w=p[3*m+2],M=0==y&&0==w?1:Math.acos(b)/Math.sqrt(y*y+w*w)*(2/Math.PI);v[2*m+0]=y*i.dualFish.circle1.rx*M*i.dualFish.circle1.coverX+i.dualFish.circle1.x,v[2*m+1]=w*i.dualFish.circle1.ry*M*i.dualFish.circle1.coverY+i.dualFish.circle1.y}for(var T=g/2;T<g;T++){var x=p[3*T+0],j=p[3*T+1],O=p[3*T+2],_=0==x&&0==O?1:Math.acos(-j)/Math.sqrt(x*x+O*O)*(2/Math.PI);v[2*T+0]=-x*i.dualFish.circle2.rx*_*i.dualFish.circle2.coverX+i.dualFish.circle2.x,v[2*T+1]=O*i.dualFish.circle2.ry*_*i.dualFish.circle2.coverY+i.dualFish.circle2.y}n.rotateX(i.rotateX),n.rotateY(i.rotateY),n.rotateZ(i.rotateZ)}n.scale(-1,1,1),this.mesh=new t.Mesh(n,new t.MeshBasicMaterial({map:this.texture})),this.scene.add(this.mesh)},enableVR:function(){if(this.VRMode=!0,"undefined"!=typeof vrHMD){var e=vrHMD.getEyeParameters("left"),i=vrHMD.getEyeParameters("right");this.eyeFOVL=e.recommendedFieldOfView,this.eyeFOVR=i.recommendedFieldOfView}this.cameraL=new t.PerspectiveCamera(this.camera.fov,this.width/2/this.height,1,2e3),this.cameraR=new t.PerspectiveCamera(this.camera.fov,this.width/2/this.height,1,2e3)},disableVR:function(){this.VRMode=!1,this.renderer.setViewport(0,0,this.width,this.height),this.renderer.setScissor(0,0,this.width,this.height)},handleResize:function(){o.handleResize.call(this),this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.VRMode&&(this.cameraL.aspect=this.camera.aspect/2,this.cameraR.aspect=this.camera.aspect/2,this.cameraL.updateProjectionMatrix(),this.cameraR.updateProjectionMatrix())},handleMouseWheel:function(e){o.handleMouseWheel(e),e.wheelDeltaY?this.camera.fov-=.05*e.wheelDeltaY:e.wheelDelta?this.camera.fov-=.05*e.wheelDelta:e.detail&&(this.camera.fov+=1*e.detail),this.camera.fov=Math.min(this.settings.maxFov,this.camera.fov),this.camera.fov=Math.max(this.settings.minFov,this.camera.fov),this.camera.updateProjectionMatrix(),this.VRMode&&(this.cameraL.fov=this.camera.fov,this.cameraR.fov=this.camera.fov,this.cameraL.updateProjectionMatrix(),this.cameraR.updateProjectionMatrix())},handleTouchMove:function(e){if(o.handleTouchMove.call(this,e),this.isUserPinch){var t=r.default.getTouchesDistance(e.touches);e.wheelDeltaY=2*(t-this.multiTouchDistance),this.handleMouseWheel.call(this,e),this.multiTouchDistance=t}},render:function(){if(o.render.call(this),this.camera.target.x=500*Math.sin(this.phi)*Math.cos(this.theta),this.camera.target.y=500*Math.cos(this.phi),this.camera.target.z=500*Math.sin(this.phi)*Math.sin(this.theta),this.camera.lookAt(this.camera.target),this.VRMode){var e=this.width/2,i=this.height;if("undefined"!=typeof vrHMD)this.cameraL.projectionMatrix=r.default.fovToProjection(this.eyeFOVL,!0,this.camera.near,this.camera.far),this.cameraR.projectionMatrix=r.default.fovToProjection(this.eyeFOVR,!0,this.camera.near,this.camera.far);else{var n=this.lon+this.settings.VRGapDegree,a=this.lon-this.settings.VRGapDegree,s=t.Math.degToRad(n),l=t.Math.degToRad(a),h=r.default.deepCopy(this.camera.target);h.x=500*Math.sin(this.phi)*Math.cos(s),h.z=500*Math.sin(this.phi)*Math.sin(s),this.cameraL.lookAt(h);var c=r.default.deepCopy(this.camera.target);c.x=500*Math.sin(this.phi)*Math.cos(l),c.z=500*Math.sin(this.phi)*Math.sin(l),this.cameraR.lookAt(c)}this.renderer.setViewport(0,0,e,i),this.renderer.setScissor(0,0,e,i),this.renderer.render(this.scene,this.cameraL),this.renderer.setViewport(e,0,e,i),this.renderer.setScissor(e,0,e,i),this.renderer.render(this.scene,this.cameraR)}else this.renderer.render(this.scene,this.camera)}})}},{"./BaseCanvas":4,"./Util":11}],6:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var n={};"undefined"!=typeof window&&(n=window);var r={canvas:!!n.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!n.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}(),workers:!!n.Worker,fileapi:n.File&&n.FileReader&&n.FileList&&n.Blob,Check_Version:function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent;null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName)if(-1!==navigator.appVersion.indexOf("Trident"))e=11;else{t=navigator.userAgent;null!==new RegExp("Edge/([0-9]{1,}[\\.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}return e},supportVideoTexture:function(){var e=this.Check_Version();return-1===e||e>=13},isLiveStreamOnSafari:function(e){var t=[].slice.call(e.querySelectorAll("source")),i=!1;e.src&&e.src.indexOf(".m3u8")>-1&&t.push({src:e.src,type:"application/x-mpegURL"});for(var n=0;n<t.length;n++){var r=t[n];if(("application/x-mpegURL"===r.type||"application/vnd.apple.mpegurl"===r.type)&&/(Safari|AppleWebKit)/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)){i=!0;break}}return i},getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",this.webgl||(e.innerHTML=n.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var t,i,n;t=void 0!==(e=e||{}).parent?e.parent:document.body,i=void 0!==e.id?e.id:"oldie",(n=r.getWebGLErrorMessage()).id=i,t.appendChild(n)}};i.default=r},{}],7:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});i.default=function(e){var t=document.createElement("canvas");return t.className="vjs-video-helper-canvas",{constructor:function(i,n){this.videoElement=n.video,this.width=n.width,this.height=n.height,t.width=this.width,t.height=this.height,t.style.display="none",n.el=t,this.context=t.getContext("2d"),this.context.drawImage(this.videoElement,0,0,this.width,this.height),e.call(this,i,n)},getContext:function(){return this.context},update:function(){this.context.drawImage(this.videoElement,0,0,this.width,this.height)},el:function(){return t}}}},{}],8:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});i.default={prev_currentTime:0,counter:0,isBuffering:function(e){return e==this.prev_currentTime?this.counter++:this.counter=0,this.prev_currentTime=e,this.counter>10&&(this.counter=10,!0)}}},{}],9:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)};i.default=function(e){var t=document.createElement("div");return t.className="vjs-video-notice-label",{constructor:function(i,r){"object"==n(r.NoticeMessage)?(t=r.NoticeMessage,r.el=r.NoticeMessage):"string"==typeof r.NoticeMessage&&(t.innerHTML=r.NoticeMessage,r.el=t),e.call(this,i,r)},el:function(){return t}}}},{}],10:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=o(e("./BaseCanvas")),r=o(e("./Util"));function o(e){return e&&e.__esModule?e:{default:e}}i.default=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(0,n.default)(e,t,i);return r.default.extend(o,{constructor:function(e,i){o.constructor.call(this,e,i),this.VRMode=!1,this.scene=new t.Scene;var n=this.width/this.height;this.cameraL=new t.PerspectiveCamera(i.initFov,n,1,2e3),this.cameraL.target=new t.Vector3(0,0,0),this.cameraR=new t.PerspectiveCamera(i.initFov,n/2,1,2e3),this.cameraR.position.set(1e3,0,0),this.cameraR.target=new t.Vector3(1e3,0,0);for(var r=new t.SphereBufferGeometry(500,60,40).toNonIndexed(),a=new t.SphereBufferGeometry(500,60,40).toNonIndexed(),s=r.attributes.uv.array,l=r.attributes.normal.array,h=0;h<l.length/3;h++)s[2*h+1]=s[2*h+1]/2;var c=a.attributes.uv.array,u=a.attributes.normal.array;for(h=0;h<u.length/3;h++)c[2*h+1]=c[2*h+1]/2+.5;r.scale(-1,1,1),a.scale(-1,1,1),this.meshL=new t.Mesh(r,new t.MeshBasicMaterial({map:this.texture})),this.meshR=new t.Mesh(a,new t.MeshBasicMaterial({map:this.texture})),this.meshR.position.set(1e3,0,0),this.scene.add(this.meshL),i.callback&&i.callback()},handleResize:function(){o.handleResize.call(this);var e=this.width/this.height;this.VRMode?(e/=2,this.cameraL.aspect=e,this.cameraR.aspect=e,this.cameraL.updateProjectionMatrix(),this.cameraR.updateProjectionMatrix()):(this.cameraL.aspect=e,this.cameraL.updateProjectionMatrix())},handleMouseWheel:function(e){o.handleMouseWheel(e),e.wheelDeltaY?this.cameraL.fov-=.05*e.wheelDeltaY:e.wheelDelta?this.cameraL.fov-=.05*e.wheelDelta:e.detail&&(this.cameraL.fov+=1*e.detail),this.cameraL.fov=Math.min(this.settings.maxFov,this.cameraL.fov),this.cameraL.fov=Math.max(this.settings.minFov,this.cameraL.fov),this.cameraL.updateProjectionMatrix(),this.VRMode&&(this.cameraR.fov=this.cameraL.fov,this.cameraR.updateProjectionMatrix())},enableVR:function(){this.VRMode=!0,this.scene.add(this.meshR),this.handleResize()},disableVR:function(){this.VRMode=!1,this.scene.remove(this.meshR),this.handleResize()},render:function(){if(o.render.call(this),this.cameraL.target.x=500*Math.sin(this.phi)*Math.cos(this.theta),this.cameraL.target.y=500*Math.cos(this.phi),this.cameraL.target.z=500*Math.sin(this.phi)*Math.sin(this.theta),this.cameraL.lookAt(this.cameraL.target),this.VRMode){var e=this.width/2,t=this.height;this.cameraR.target.x=1e3+500*Math.sin(this.phi)*Math.cos(this.theta),this.cameraR.target.y=500*Math.cos(this.phi),this.cameraR.target.z=500*Math.sin(this.phi)*Math.sin(this.theta),this.cameraR.lookAt(this.cameraR.target),this.renderer.setViewport(0,0,e,t),this.renderer.setScissor(0,0,e,t),this.renderer.render(this.scene,this.cameraL),this.renderer.setViewport(e,0,e,t),this.renderer.setScissor(e,0,e,t),this.renderer.render(this.scene,this.cameraR)}else this.renderer.render(this.scene,this.cameraL)}})}},{"./BaseCanvas":4,"./Util":11}],11:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default={whichTransitionEvent:function(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},mobileAndTabletcheck:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},isIos:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},isRealIphone:function(){return/iPhone|iPod/i.test(navigator.platform)},fovToProjection:function(e,t,i,n){var r=Math.PI/180;return function(e,t,i,n){i=void 0===i?.01:i,n=void 0===n?1e4:n;var r=(t=void 0===t||t)?-1:1,o=new THREE.Matrix4,a=o.elements,s=function(e){var t=2/(e.leftTan+e.rightTan),i=(e.leftTan-e.rightTan)*t*.5,n=2/(e.upTan+e.downTan);return{scale:[t,n],offset:[i,(e.upTan-e.downTan)*n*.5]}}(e);return a[0]=s.scale[0],a[1]=0,a[2]=s.offset[0]*r,a[3]=0,a[4]=0,a[5]=s.scale[1],a[6]=-s.offset[1]*r,a[7]=0,a[8]=0,a[9]=0,a[10]=n/(i-n)*-r,a[11]=n*i/(i-n),a[12]=0,a[13]=0,a[14]=r,a[15]=0,o.transpose(),o}({upTan:Math.tan(e.upDegrees*r),downTan:Math.tan(e.downDegrees*r),leftTan:Math.tan(e.leftDegrees*r),rightTan:Math.tan(e.rightDegrees*r)},t,i,n)},extend:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var i in e)e.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=e[i]);return t},deepCopy:function(e){var t={};for(var i in e)t[i]=e[i];return t},getTouchesDistance:function(e){return Math.sqrt((e[0].clientX-e[1].clientX)*(e[0].clientX-e[1].clientX)+(e[0].clientY-e[1].clientY)*(e[0].clientY-e[1].clientY))}}},{}],12:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});i.default=function(e){return{constructor:function(t,i){e.call(this,t,i)},buildCSSClass:function(){return"vjs-VR-control "+e.prototype.buildCSSClass.call(this)},handleClick:function(){var e=this.player().getChild("Canvas");e.VRMode?e.disableVR():e.enableVR(),e.VRMode?this.addClass("enable"):this.removeClass("enable"),e.VRMode?this.player().trigger("VRModeOn"):this.player().trigger("VRModeOff")},controlText_:"VR"}}},{}],13:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var n=o(e("./lib/Util")),r=o(e("./lib/Detector"));function o(e){return e&&e.__esModule?e:{default:e}}var a="undefined"!=typeof window&&n.default.mobileAndTabletcheck(),s={clickAndDrag:a,showNotice:!0,NoticeMessage:"Please use your mouse drag and drop the video.",autoHideNotice:3e3,scrollable:!0,initFov:75,maxFov:105,minFov:51,initLat:0,initLon:-180,returnStepLat:.5,returnStepLon:2,backToVerticalCenter:!a,backToHorizonCenter:!a,clickToToggle:!1,minLat:-85,maxLat:85,minLon:-1/0,maxLon:1/0,videoType:"equirectangular",rotateX:0,rotateY:0,rotateZ:0,autoMobileOrientation:!1,mobileVibrationValue:a&&n.default.isIos()?.022:1,VREnable:!0,VRGapDegree:2.5,closePanorama:!1,helperCanvas:{},dualFish:{width:1920,height:1080,circle1:{x:.240625,y:.553704,rx:.23333,ry:.43148,coverX:.913,coverY:.9},circle2:{x:.757292,y:.553704,rx:.232292,ry:.4296296,coverX:.913,coverY:.9308}}};function l(e,t){var i=function(e){var t=e.getChild("Canvas");return function(){e.el().style.width=window.innerWidth+"px",e.el().style.height=window.innerHeight+"px",t.handleResize()}}(e);e.controlBar.fullscreenToggle.off("tap",t),e.controlBar.fullscreenToggle.on("tap",function(){var t=e.getChild("Canvas");e.isFullscreen()?(e.isFullscreen(!1),e.exitFullWindow(),e.el().style.width="",e.el().style.height="",t.handleResize(),window.removeEventListener("devicemotion",i)):(e.isFullscreen(!0),e.enterFullWindow(),i(),window.addEventListener("devicemotion",i))})}var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{NoticeMessage:""},i=e.addChild("Notice",t);t.autoHideNotice>0&&setTimeout(function(){if(i.el_){i.addClass("vjs-video-notice-fadeOut");var e=n.default.whichTransitionEvent();i.on(e,function t(){i.hide(),i.removeClass("vjs-video-notice-fadeOut"),i.off(e,t)})}},t.autoHideNotice)};i.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=["equirectangular","fisheye","3dVideo","dual_fisheye"],o=function(o){var c=this;t.mergeOption&&(o=t.mergeOption(s,o)),void 0!==t._init&&"function"==typeof t._init?(-1==i.indexOf(o.videoType)&&(o.videoType=s.videoType),t._init(o),this.ready(function(){!function(t,i,o){if(t.addClass("vjs-panorama"),!r.default.webgl)return h(t,{NoticeMessage:r.default.getWebGLErrorMessage(),autoHideNotice:i.autoHideNotice}),void(i.callback&&i.callback());t.addChild("Canvas",n.default.deepCopy(i));var s=t.getChild("Canvas");if(a){var c=o.getTech(t);if(n.default.isRealIphone()){var u=e("iphone-inline-video");c.setAttribute("playsinline",""),u(c,!0)}n.default.isIos()&&l(t,o.getFullscreenToggleClickFn(t)),t.addClass("vjs-panorama-mobile-inline-video"),t.removeClass("vjs-using-native-controls"),s.playOnMobile()}i.showNotice&&t.on("playing",function(){h(t,n.default.deepCopy(i))}),i.VREnable&&t.controlBar.addChild("VRButton",{},t.controlBar.children().length-1),s.hide(),t.on("play",function(){s.show()}),t.on("fullscreenchange",function(){s.handleResize()}),i.callback&&i.callback()}(c,o,t)})):console.error("plugin must implement init function().")};return o.VERSION="0.1.7",o}},{"./lib/Detector":6,"./lib/Util":11,"iphone-inline-video":2}],14:[function(e,t,i){var n=h(e("./lib/Canvas")),r=h(e("./lib/ThreeCanvas")),o=h(e("./lib/Notice")),a=h(e("./lib/HelperCanvas")),s=h(e("./lib/VRButton")),l=h(e("./plugin"));function h(e){return e&&e.__esModule?e:{default:e}}function c(e){return e.tech({IWillNotUseThisInPlugins:!0}).el()}var u=videojs.getComponent("Component"),d=(0,o.default)(u);videojs.registerComponent("Notice",videojs.extend(u,d));var f=(0,a.default)(u);videojs.registerComponent("HelperCanvas",videojs.extend(u,f));var p=videojs.getComponent("Button"),v=(0,s.default)(p);videojs.registerComponent("VRButton",videojs.extend(p,v)),videojs.plugin("panorama",(0,l.default)({_init:function(e){var t="3dVideo"!==e.videoType?(0,n.default)(u,window.THREE,{getTech:c}):(0,r.default)(u,window.THREE,{getTech:c});videojs.registerComponent("Canvas",videojs.extend(u,t))},mergeOption:function(e,t){return videojs.mergeOptions(e,t)},getTech:c,getFullscreenToggleClickFn:function(e){return e.controlBar.fullscreenToggle.handleClick}}))},{"./lib/Canvas":5,"./lib/HelperCanvas":7,"./lib/Notice":9,"./lib/ThreeCanvas":10,"./lib/VRButton":12,"./plugin":13}]},{},[14])(function(){var e=null;e=void 0===window.videojs&&"function"==typeof require?require("video.js"):window.videojs,function(e,t){var i,n={ui:!0},r=t.getComponent("MenuItem"),o=t.extend(r,{constructor:function(e,i){i.selectable=!0,r.call(this,e,i),this.src=i.src,e.on("resolutionchange",t.bind(this,this.update))}});o.prototype.handleClick=function(e){r.prototype.handleClick.call(this,e),this.player_.currentResolution(this.options_.label)},o.prototype.update=function(){var e=this.player_.currentResolution();this.selected(this.options_.label===e.label)},r.registerComponent("ResolutionMenuItem",o);var a=t.getComponent("MenuButton"),s=t.extend(a,{constructor:function(e,i){if(this.label=document.createElement("span"),i.label="Quality",a.call(this,e,i),this.el().setAttribute("aria-label","Quality"),this.controlText("Quality"),i.dynamicLabel)t.addClass(this.label,"vjs-resolution-button-label"),this.el().appendChild(this.label);else{var n=document.createElement("span");t.addClass(n,"vjs-menu-icon"),this.el().appendChild(n)}e.on("updateSources",t.bind(this,this.update))}});s.prototype.createItems=function(){var e=[],t=this.sources&&this.sources.label||{};for(var i in t)t.hasOwnProperty(i)&&e.push(new o(this.player_,{label:i,src:t[i],selected:i===(!!this.currentSelection&&this.currentSelection.label)}));return e},s.prototype.update=function(){return this.sources=this.player_.getGroupedSrc(),this.currentSelection=this.player_.currentResolution(),this.label.innerHTML=this.currentSelection?this.currentSelection.label:"",a.prototype.update.call(this)},s.prototype.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-resolution-button"},a.registerComponent("ResolutionMenuButton",s),i=function(e){var i=t.mergeOptions(n,e),r=this;function o(e,t){return e.res&&t.res?+t.res-+e.res:0}function a(e){var t={label:{},res:{},type:{}};return e.map(function(e){l(t,"label",e),l(t,"res",e),l(t,"type",e),h(t,"label",e),h(t,"res",e),h(t,"type",e)}),t}function l(e,t,i){null==e[t][i[t]]&&(e[t][i[t]]=[])}function h(e,t,i){e[t][i[t]].push(i)}r.updateSrc=function(e){if(!e)return r.src();e=e.filter(function(e){try{return""!==r.canPlayType(e.type)}catch(e){return!0}}),this.currentSources=e.sort(o),this.groupedSrc=a(this.currentSources);var t=function(e,t){var n=i.default,r="";"high"===n?(n=t[0].res,r=t[0].label):"low"!==n&&null!=n&&e.res[n]?e.res[n]&&(r=e.res[n][0].label):(n=t[t.length-1].res,r=t[t.length-1].label);return{res:n,label:r,sources:e.res[n]}}(this.groupedSrc,this.currentSources);return this.currentResolutionState={label:t.label,sources:t.sources},r.trigger("updateSources"),r.setSourcesSanitized(t.sources,t.label),r.trigger("resolutionchange"),r},r.currentResolution=function(e,t){if(null==e)return this.currentResolutionState;if(this.groupedSrc&&this.groupedSrc.label&&this.groupedSrc.label[e]){var n=this.groupedSrc.label[e],o=r.currentTime(),a=r.paused();!a&&this.player_.options_.bigPlayButton&&this.player_.bigPlayButton.hide();var s="loadeddata";return"Youtube"!==this.player_.techName_&&"none"===this.player_.preload()&&"Flash"!==this.player_.techName_&&(s="timeupdate"),r.setSourcesSanitized(n,e,t||i.customSourcePicker).one(s,function(){r.currentTime(o),r.handleTechSeeked_(),a||r.play().handleTechSeeked_(),r.trigger("resolutionchange")}),r}},r.getGroupedSrc=function(){return this.groupedSrc},r.setSourcesSanitized=function(e,t,i){return this.currentResolutionState={label:t,sources:e},"function"==typeof i?i(r,e,t):(r.src(e.map(function(e){return{src:e.src,type:e.type,res:e.res}})),r)},r.ready(function(){if(i.ui){var e=new s(r,i);r.controlBar.resolutionSwitcher=r.controlBar.el_.insertBefore(e.el_,r.controlBar.getChild("fullscreenToggle").el_),r.controlBar.resolutionSwitcher.dispose=function(){this.parentNode.removeChild(this)}}r.options_.sources.length>1&&r.updateSrc(r.options_.sources),"Youtube"===r.techName_&&function(e){var t={highres:{res:1080,label:"1080",yt:"highres"},hd1080:{res:1080,label:"1080",yt:"hd1080"},hd720:{res:720,label:"720",yt:"hd720"},large:{res:480,label:"480",yt:"large"},medium:{res:360,label:"360",yt:"medium"},small:{res:240,label:"240",yt:"small"},tiny:{res:144,label:"144",yt:"tiny"},auto:{res:0,label:"auto",yt:"auto"}},n=function(t,i,n){return e.tech_.ytPlayer.setPlaybackQuality(i[0]._yt),e.trigger("updateSources"),e};i.customSourcePicker=n,e.tech_.ytPlayer.setPlaybackQuality("auto"),e.tech_.ytPlayer.addEventListener("onPlaybackQualityChange",function(i){for(var r in t)if(r.yt===i.data)return void e.currentResolution(r.label,n)}),e.one("play",function(){var i=e.tech_.ytPlayer.getAvailableQualityLevels(),r=[];i.map(function(i){r.push({src:e.src().src,type:e.src().type,label:t[i].label,res:t[i].res,_yt:t[i].yt})}),e.groupedSrc=a(r);var o={label:"auto",res:0,sources:e.groupedSrc.label.auto};this.currentResolutionState={label:o.label,sources:o.sources},e.trigger("updateSources"),e.setSourcesSanitized(o.sources,o.label,n)})}(r)})},t.plugin("videoJsResolutionSwitcher",i)}(window,e)})();